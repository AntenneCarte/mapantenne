<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Times; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Times; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Times; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Times; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Times; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 18.0px}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Times; color: #4f7b3d; -webkit-text-stroke: #4f7b3d}
    span.s1 {font-kerning: none; background-color: #171717}
    span.s2 {font-kerning: none; color: #8cd3fe; background-color: #171717; -webkit-text-stroke: 0px #8cd3fe}
    span.s3 {font-kerning: none; color: #6d6d6d; background-color: #171717; -webkit-text-stroke: 0px #6d6d6d}
    span.s4 {font-kerning: none; color: #4689cc; background-color: #171717; -webkit-text-stroke: 0px #4689cc}
    span.s5 {font-kerning: none; color: #cacaca; background-color: #171717; -webkit-text-stroke: 0px #cacaca}
    span.s6 {font-kerning: none; color: #c27e65; background-color: #171717; -webkit-text-stroke: 0px #c27e65}
    span.s7 {font-kerning: none}
    span.s8 {font-kerning: none; color: #d4d4d4; background-color: #171717; -webkit-text-stroke: 0px #d4d4d4}
    span.s9 {font-kerning: none; color: #a7c598; background-color: #171717; -webkit-text-stroke: 0px #a7c598}
    span.s10 {font-kerning: none; color: #36c0a0; background-color: #171717; -webkit-text-stroke: 0px #36c0a0}
    span.s11 {font-kerning: none; color: #4f7b3d; background-color: #171717; -webkit-text-stroke: 0px #4f7b3d}
    span.s12 {font-kerning: none; color: #a34f83; background-color: #171717; -webkit-text-stroke: 0px #a34f83}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">html</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s3">&lt;</span><span class="s4">title</span><span class="s3">&gt;</span><span class="s1">Carte antennes sans clusters</span><span class="s3">&lt;/</span><span class="s4">title</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s6">"utf-8"</span><span class="s5"> </span><span class="s3">/&gt;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s5"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s3">&lt;</span><span class="s4">link</span><span class="s5"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"stylesheet"</span><span class="s5"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"</span><span class="s5"> </span><span class="s3">/&gt;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">html</span><span class="s8">,</span><span class="s5"> </span><span class="s1">body</span><span class="s8">,</span><span class="s5"> </span><span class="s1">#map</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">height:</span><span class="s1"> </span><span class="s9">100%</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">margin:</span><span class="s1"> </span><span class="s9">0</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">padding:</span><span class="s5"> </span><span class="s9">0</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">#controls</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">position:</span><span class="s5"> </span><span class="s6">absolute</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">top:</span><span class="s1"> </span><span class="s9">10px</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">right:</span><span class="s1"> </span><span class="s9">10px</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">background:</span><span class="s5"> </span><span class="s6">white</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">padding:</span><span class="s5"> </span><span class="s9">6px</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">z-index:</span><span class="s5"> </span><span class="s9">1000</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">border-radius:</span><span class="s5"> </span><span class="s9">4px</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">box-shadow:</span><span class="s5"> </span><span class="s9">0</span><span class="s5"> </span><span class="s9">0</span><span class="s5"> </span><span class="s9">4px</span><span class="s5"> </span><span class="s6">rgba(</span><span class="s9">0</span><span class="s8">,</span><span class="s9">0</span><span class="s8">,</span><span class="s9">0</span><span class="s8">,</span><span class="s9">0.2</span><span class="s6">)</span><span class="s8">;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">font-family:</span><span class="s5"> </span><span class="s1">Arial</span><span class="s8">,</span><span class="s5"> </span><span class="s1">sans-serif</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">font-size:</span><span class="s5"> </span><span class="s9">12px</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">user-select:</span><span class="s5"> </span><span class="s6">none</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">max-width:</span><span class="s5"> </span><span class="s9">160px</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">.freq-label</span><span class="s8">,</span><span class="s5"> </span><span class="s1">.operator-label</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">cursor:</span><span class="s1"> </span><span class="s6">pointer</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">display:</span><span class="s5"> </span><span class="s6">block</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">margin-bottom:</span><span class="s5"> </span><span class="s9">3px</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">fieldset</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">margin-bottom:</span><span class="s5"> </span><span class="s9">6px</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s6">none</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">padding:</span><span class="s5"> </span><span class="s9">0</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">display:</span><span class="s5"> </span><span class="s6">flex</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">flex-direction:</span><span class="s5"> </span><span class="s6">column</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">legend</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">font-weight:</span><span class="s5"> </span><span class="s6">bold</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">margin-bottom:</span><span class="s5"> </span><span class="s9">4px</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"controls"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">fieldset</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s3">&lt;</span><span class="s4">legend</span><span class="s3">&gt;&lt;</span><span class="s4">b</span><span class="s3">&gt;</span><span class="s1">Opérateur :</span><span class="s3">&lt;/</span><span class="s4">b</span><span class="s3">&gt;&lt;/</span><span class="s4">legend</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s3">&lt;</span><span class="s4">label</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"operator-label"</span><span class="s3">&gt;&lt;</span><span class="s4">input</span><span class="s5"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"radio"</span><span class="s5"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"operatorFilter"</span><span class="s5"> </span><span class="s2">value</span><span class="s3">=</span><span class="s1">"Sunrise"</span><span class="s5"> </span><span class="s2">checked</span><span class="s3">&gt;</span><span class="s5"> Sunrise</span><span class="s3">&lt;/</span><span class="s4">label</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s3">&lt;</span><span class="s4">label</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"operator-label"</span><span class="s3">&gt;&lt;</span><span class="s4">input</span><span class="s5"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"radio"</span><span class="s5"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"operatorFilter"</span><span class="s5"> </span><span class="s2">value</span><span class="s3">=</span><span class="s1">"Salt"</span><span class="s3">&gt;</span><span class="s5"> Salt</span><span class="s3">&lt;/</span><span class="s4">label</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s3">&lt;</span><span class="s4">label</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"operator-label"</span><span class="s3">&gt;&lt;</span><span class="s4">input</span><span class="s5"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"radio"</span><span class="s5"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"operatorFilter"</span><span class="s5"> </span><span class="s2">value</span><span class="s3">=</span><span class="s1">"Swisscom"</span><span class="s3">&gt;</span><span class="s5"> Swisscom</span><span class="s3">&lt;/</span><span class="s4">label</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">fieldset</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">fieldset</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s3">&lt;</span><span class="s4">legend</span><span class="s3">&gt;&lt;</span><span class="s4">b</span><span class="s3">&gt;</span><span class="s1">Fréquence :</span><span class="s3">&lt;/</span><span class="s4">b</span><span class="s3">&gt;&lt;/</span><span class="s4">legend</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s3">&lt;</span><span class="s4">label</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"freq-label"</span><span class="s3">&gt;&lt;</span><span class="s4">input</span><span class="s5"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"radio"</span><span class="s5"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"freqFilter"</span><span class="s5"> </span><span class="s2">value</span><span class="s3">=</span><span class="s1">"freq1"</span><span class="s5"> </span><span class="s2">checked</span><span class="s3">&gt;</span><span class="s5"> </span><span class="s3">&lt;</span><span class="s5"> 900 MHz</span><span class="s3">&lt;/</span><span class="s4">label</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s3">&lt;</span><span class="s4">label</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"freq-label"</span><span class="s3">&gt;&lt;</span><span class="s4">input</span><span class="s5"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"radio"</span><span class="s5"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"freqFilter"</span><span class="s5"> </span><span class="s2">value</span><span class="s3">=</span><span class="s1">"freq2"</span><span class="s3">&gt;</span><span class="s5"> 900-1000 MHz</span><span class="s3">&lt;/</span><span class="s4">label</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s3">&lt;</span><span class="s4">label</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"freq-label"</span><span class="s3">&gt;&lt;</span><span class="s4">input</span><span class="s5"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"radio"</span><span class="s5"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"freqFilter"</span><span class="s5"> </span><span class="s2">value</span><span class="s3">=</span><span class="s1">"freq3"</span><span class="s3">&gt;</span><span class="s5"> 1000-3000 MHz</span><span class="s3">&lt;/</span><span class="s4">label</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s3">&lt;</span><span class="s4">label</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"freq-label"</span><span class="s3">&gt;&lt;</span><span class="s4">input</span><span class="s5"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"radio"</span><span class="s5"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"freqFilter"</span><span class="s5"> </span><span class="s2">value</span><span class="s3">=</span><span class="s1">"freq4"</span><span class="s3">&gt;</span><span class="s5"> &gt; 3000 MHz</span><span class="s3">&lt;/</span><span class="s4">label</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">fieldset</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s3">&lt;/</span><span class="s1">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s3">&lt;</span><span class="s1">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s6">"map"</span><span class="s3">&gt;&lt;/</span><span class="s1">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">var</span><span class="s1"> map </span><span class="s8">=</span><span class="s1"> </span><span class="s10">L</span><span class="s8">.</span><span class="s1">map</span><span class="s8">(</span><span class="s6">'map'</span><span class="s8">).</span><span class="s1">setView</span><span class="s8">([</span><span class="s9">46.8</span><span class="s8">,</span><span class="s1"> </span><span class="s9">8.2</span><span class="s8">],</span><span class="s1"> </span><span class="s9">8</span><span class="s8">);</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s10">L</span><span class="s8">.</span><span class="s5">tileLayer</span><span class="s8">(</span><span class="s1">'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'</span><span class="s8">,</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">      </span>attribution</span><span class="s8">:</span><span class="s5"> </span><span class="s1">'© OpenStreetMap contributors'</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s8">}).</span><span class="s1">addTo</span><span class="s8">(</span><span class="s1">map</span><span class="s8">);</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">var</span><span class="s1"> geojsonURLs </span><span class="s8">=</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s10">Sunrise</span><span class="s8">:</span><span class="s5"> </span><span class="s1">'https://raw.githubusercontent.com/AntenneCarte/antenne5g/main/Sunrise-5G.geojson'</span><span class="s8">,</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s10">Salt</span><span class="s8">:</span><span class="s5"> </span><span class="s1">'https://raw.githubusercontent.com/AntenneCarte/antenne5g/main/Salt-5G.geojson'</span><span class="s8">,</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s10">Swisscom</span><span class="s8">:</span><span class="s5"> </span><span class="s1">'https://raw.githubusercontent.com/AntenneCarte/antenne5g/main/Swisscom-5G.geojson'</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s8">};</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">var</span><span class="s1"> layers </span><span class="s8">=</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span>freq1</span><span class="s8">:</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> markers</span><span class="s8">:</span><span class="s1"> </span><span class="s10">L</span><span class="s8">.</span><span class="s1">layerGroup</span><span class="s8">(),</span><span class="s1"> sectors</span><span class="s8">:</span><span class="s1"> </span><span class="s10">L</span><span class="s8">.</span><span class="s1">layerGroup</span><span class="s8">()</span><span class="s1"> </span><span class="s8">},</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span>freq2</span><span class="s8">:</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> markers</span><span class="s8">:</span><span class="s1"> </span><span class="s10">L</span><span class="s8">.</span><span class="s1">layerGroup</span><span class="s8">(),</span><span class="s1"> sectors</span><span class="s8">:</span><span class="s1"> </span><span class="s10">L</span><span class="s8">.</span><span class="s1">layerGroup</span><span class="s8">()</span><span class="s1"> </span><span class="s8">},</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span>freq3</span><span class="s8">:</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> markers</span><span class="s8">:</span><span class="s1"> </span><span class="s10">L</span><span class="s8">.</span><span class="s1">layerGroup</span><span class="s8">(),</span><span class="s1"> sectors</span><span class="s8">:</span><span class="s1"> </span><span class="s10">L</span><span class="s8">.</span><span class="s1">layerGroup</span><span class="s8">()</span><span class="s1"> </span><span class="s8">},</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span>freq4</span><span class="s8">:</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> markers</span><span class="s8">:</span><span class="s1"> </span><span class="s10">L</span><span class="s8">.</span><span class="s1">layerGroup</span><span class="s8">(),</span><span class="s1"> sectors</span><span class="s8">:</span><span class="s1"> </span><span class="s10">L</span><span class="s8">.</span><span class="s1">layerGroup</span><span class="s8">()</span><span class="s1"> </span><span class="s8">}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s8">};</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">var</span><span class="s1"> currentOperator </span><span class="s8">=</span><span class="s1"> </span><span class="s6">"Sunrise"</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">var</span><span class="s1"> currentFrequency </span><span class="s8">=</span><span class="s1"> </span><span class="s6">"freq1"</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">var</span><span class="s1"> sectorRadius </span><span class="s8">=</span><span class="s1"> </span><span class="s9">500</span><span class="s1"> </span><span class="s8">/</span><span class="s1"> </span><span class="s9">3</span><span class="s8">;</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s4">const</span><span class="s5"> </span><span class="s10">MIN_ZOOM_FOR_SECTORS</span><span class="s5"> </span><span class="s8">=</span><span class="s5"> </span><span class="s9">10</span><span class="s8">;</span><span class="s5"> </span><span class="s1">// Seuil de zoom minimum pour les secteurs</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s4">const</span><span class="s5"> </span><span class="s10">MAX_DISTANCE_FOR_SECTORS</span><span class="s5"> </span><span class="s8">=</span><span class="s5"> </span><span class="s9">5000</span><span class="s8">;</span><span class="s5"> </span><span class="s1">// Distance max en mètres pour afficher les secteurs</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">function</span><span class="s1"> createAzimuthSector</span><span class="s8">(</span><span class="s1">lat</span><span class="s8">,</span><span class="s1"> lon</span><span class="s8">,</span><span class="s1"> azimuth</span><span class="s8">,</span><span class="s1"> angleWidth</span><span class="s8">,</span><span class="s1"> radius</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s4">var</span><span class="s1"> points </span><span class="s8">=</span><span class="s1"> </span><span class="s8">[];</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s4">var</span><span class="s1"> numPoints </span><span class="s8">=</span><span class="s1"> </span><span class="s9">30</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span>points</span><span class="s8">.</span><span class="s1">push</span><span class="s8">([</span><span class="s1">lat</span><span class="s8">,</span><span class="s1"> lon</span><span class="s8">]);</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s4">var</span><span class="s1"> azimuthRad </span><span class="s8">=</span><span class="s1"> azimuth </span><span class="s8">*</span><span class="s1"> </span><span class="s10">Math</span><span class="s8">.</span><span class="s10">PI</span><span class="s1"> </span><span class="s8">/</span><span class="s1"> </span><span class="s9">180</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s4">var</span><span class="s1"> angleStart </span><span class="s8">=</span><span class="s1"> azimuthRad </span><span class="s8">-</span><span class="s1"> </span><span class="s8">(</span><span class="s1">angleWidth </span><span class="s8">*</span><span class="s1"> </span><span class="s10">Math</span><span class="s8">.</span><span class="s10">PI</span><span class="s1"> </span><span class="s8">/</span><span class="s1"> </span><span class="s9">180</span><span class="s8">)</span><span class="s1"> </span><span class="s8">/</span><span class="s1"> </span><span class="s9">2</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s4">var</span><span class="s1"> angleEnd </span><span class="s8">=</span><span class="s1"> azimuthRad </span><span class="s8">+</span><span class="s1"> </span><span class="s8">(</span><span class="s1">angleWidth </span><span class="s8">*</span><span class="s1"> </span><span class="s10">Math</span><span class="s8">.</span><span class="s10">PI</span><span class="s1"> </span><span class="s8">/</span><span class="s1"> </span><span class="s9">180</span><span class="s8">)</span><span class="s1"> </span><span class="s8">/</span><span class="s1"> </span><span class="s9">2</span><span class="s8">;</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s4">for</span><span class="s1"> </span><span class="s8">(</span><span class="s4">var</span><span class="s1"> i </span><span class="s8">=</span><span class="s1"> </span><span class="s9">0</span><span class="s8">;</span><span class="s1"> i </span><span class="s8">&lt;=</span><span class="s1"> numPoints</span><span class="s8">;</span><span class="s1"> i</span><span class="s8">++)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">var</span><span class="s1"> angle </span><span class="s8">=</span><span class="s1"> angleStart </span><span class="s8">+</span><span class="s1"> </span><span class="s8">(</span><span class="s1">angleEnd </span><span class="s8">-</span><span class="s1"> angleStart</span><span class="s8">)</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s8">(</span><span class="s1">i </span><span class="s8">/</span><span class="s1"> numPoints</span><span class="s8">);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">var</span><span class="s1"> dx </span><span class="s8">=</span><span class="s1"> radius </span><span class="s8">*</span><span class="s1"> </span><span class="s10">Math</span><span class="s8">.</span><span class="s1">sin</span><span class="s8">(</span><span class="s1">angle</span><span class="s8">);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">var</span><span class="s1"> dy </span><span class="s8">=</span><span class="s1"> radius </span><span class="s8">*</span><span class="s1"> </span><span class="s10">Math</span><span class="s8">.</span><span class="s1">cos</span><span class="s8">(</span><span class="s1">angle</span><span class="s8">);</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">var</span><span class="s1"> newLat </span><span class="s8">=</span><span class="s1"> lat </span><span class="s8">+</span><span class="s1"> </span><span class="s8">(</span><span class="s1">dy </span><span class="s8">/</span><span class="s1"> </span><span class="s9">111320</span><span class="s8">);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">var</span><span class="s1"> newLon </span><span class="s8">=</span><span class="s1"> lon </span><span class="s8">+</span><span class="s1"> </span><span class="s8">(</span><span class="s1">dx </span><span class="s8">/</span><span class="s1"> </span><span class="s8">(</span><span class="s9">111320</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s10">Math</span><span class="s8">.</span><span class="s1">cos</span><span class="s8">(</span><span class="s1">lat </span><span class="s8">*</span><span class="s1"> </span><span class="s10">Math</span><span class="s8">.</span><span class="s10">PI</span><span class="s1"> </span><span class="s8">/</span><span class="s1"> </span><span class="s9">180</span><span class="s8">)));</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span>points</span><span class="s8">.</span><span class="s1">push</span><span class="s8">([</span><span class="s1">newLat</span><span class="s8">,</span><span class="s1"> newLon</span><span class="s8">]);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s8">}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s4">return</span><span class="s1"> points</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s8">}</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s4">function</span><span class="s1"> updateMap</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s4">for</span><span class="s1"> </span><span class="s8">(</span><span class="s4">const</span><span class="s1"> key </span><span class="s4">in</span><span class="s1"> layers</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span>map</span><span class="s8">.</span><span class="s1">removeLayer</span><span class="s8">(</span><span class="s1">layers</span><span class="s8">[</span><span class="s1">key</span><span class="s8">].</span><span class="s1">markers</span><span class="s8">);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span>map</span><span class="s8">.</span><span class="s1">removeLayer</span><span class="s8">(</span><span class="s1">layers</span><span class="s8">[</span><span class="s1">key</span><span class="s8">].</span><span class="s1">sectors</span><span class="s8">);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span>layers</span><span class="s8">[</span><span class="s1">key</span><span class="s8">].</span><span class="s1">markers</span><span class="s8">.</span><span class="s1">clearLayers</span><span class="s8">();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span>layers</span><span class="s8">[</span><span class="s1">key</span><span class="s8">].</span><span class="s1">sectors</span><span class="s8">.</span><span class="s1">clearLayers</span><span class="s8">();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s8">}</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s4">var</span><span class="s1"> markerCoords </span><span class="s8">=</span><span class="s1"> </span><span class="s8">{};</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s4">var</span><span class="s1"> mapCenter </span><span class="s8">=</span><span class="s1"> map</span><span class="s8">.</span><span class="s1">getCenter</span><span class="s8">();</span><span class="s1"> </span><span class="s11">// Centre actuel de la carte</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span>fetch</span><span class="s8">(</span><span class="s1">geojsonURLs</span><span class="s8">[</span><span class="s1">currentOperator</span><span class="s8">])</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">.</span><span class="s1">then</span><span class="s8">(</span><span class="s1">response </span><span class="s8">=&gt;</span><span class="s1"> response</span><span class="s8">.</span><span class="s1">json</span><span class="s8">())</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">.</span><span class="s1">then</span><span class="s8">(</span><span class="s1">data </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">          </span>data</span><span class="s8">.</span><span class="s1">features</span><span class="s8">.</span><span class="s1">forEach</span><span class="s8">(</span><span class="s1">feature </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s4">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">feature</span><span class="s8">.</span><span class="s1">geometry</span><span class="s8">.</span><span class="s1">type </span><span class="s8">===</span><span class="s1"> </span><span class="s6">"Point"</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s4">var</span><span class="s1"> coords </span><span class="s8">=</span><span class="s1"> feature</span><span class="s8">.</span><span class="s1">geometry</span><span class="s8">.</span><span class="s1">coordinates</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s4">var</span><span class="s1"> lon </span><span class="s8">=</span><span class="s1"> coords</span><span class="s8">[</span><span class="s9">0</span><span class="s8">];</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s4">var</span><span class="s1"> lat </span><span class="s8">=</span><span class="s1"> coords</span><span class="s8">[</span><span class="s9">1</span><span class="s8">];</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s4">var</span><span class="s1"> props </span><span class="s8">=</span><span class="s1"> feature</span><span class="s8">.</span><span class="s1">properties</span><span class="s8">;</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s4">var</span><span class="s1"> azimutStr </span><span class="s8">=</span><span class="s1"> props</span><span class="s8">[</span><span class="s6">"Azimut"</span><span class="s8">]</span><span class="s1"> </span><span class="s8">||</span><span class="s1"> </span><span class="s6">"0°"</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s4">var</span><span class="s1"> azimut </span><span class="s8">=</span><span class="s1"> parseFloat</span><span class="s8">(</span><span class="s1">azimutStr</span><span class="s8">.</span><span class="s1">replace</span><span class="s8">(</span><span class="s6">"°"</span><span class="s8">,</span><span class="s1"> </span><span class="s6">""</span><span class="s8">));</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s4">var</span><span class="s1"> freqStr </span><span class="s8">=</span><span class="s1"> props</span><span class="s8">[</span><span class="s6">"frequency (MHz)"</span><span class="s8">]</span><span class="s1"> </span><span class="s8">||</span><span class="s1"> </span><span class="s6">"0 MHz"</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s4">var</span><span class="s1"> freq </span><span class="s8">=</span><span class="s1"> parseFloat</span><span class="s8">(</span><span class="s1">freqStr</span><span class="s8">.</span><span class="s1">replace</span><span class="s8">(</span><span class="s12">/[^\d.]/</span><span class="s4">g</span><span class="s8">,</span><span class="s1"> </span><span class="s6">''</span><span class="s8">))</span><span class="s1"> </span><span class="s8">||</span><span class="s1"> </span><span class="s9">0</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s4">var</span><span class="s1"> powerStr </span><span class="s8">=</span><span class="s1"> props</span><span class="s8">[</span><span class="s6">"Power (W)"</span><span class="s8">]</span><span class="s1"> </span><span class="s8">||</span><span class="s1"> </span><span class="s6">"N/A"</span><span class="s8">;</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s4">var</span><span class="s1"> targetLayer</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s4">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">freq </span><span class="s8">&lt;</span><span class="s1"> </span><span class="s9">900</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span>targetLayer </span><span class="s8">=</span><span class="s1"> </span><span class="s6">"freq1"</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s8">}</span><span class="s1"> </span><span class="s4">else</span><span class="s1"> </span><span class="s4">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">freq </span><span class="s8">&gt;=</span><span class="s1"> </span><span class="s9">900</span><span class="s1"> </span><span class="s8">&amp;&amp;</span><span class="s1"> freq </span><span class="s8">&lt;=</span><span class="s1"> </span><span class="s9">1000</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span>targetLayer </span><span class="s8">=</span><span class="s1"> </span><span class="s6">"freq2"</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s8">}</span><span class="s1"> </span><span class="s4">else</span><span class="s1"> </span><span class="s4">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">freq </span><span class="s8">&gt;</span><span class="s1"> </span><span class="s9">1000</span><span class="s1"> </span><span class="s8">&amp;&amp;</span><span class="s1"> freq </span><span class="s8">&lt;=</span><span class="s1"> </span><span class="s9">3000</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span>targetLayer </span><span class="s8">=</span><span class="s1"> </span><span class="s6">"freq3"</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s8">}</span><span class="s1"> </span><span class="s4">else</span><span class="s1"> </span><span class="s4">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">freq </span><span class="s8">&gt;</span><span class="s1"> </span><span class="s9">3000</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span>targetLayer </span><span class="s8">=</span><span class="s1"> </span><span class="s6">"freq4"</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s8">}</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s4">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">targetLayer </span><span class="s8">===</span><span class="s1"> currentFrequency</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s1">// Toujours ajouter les marqueurs, indépendamment du zoom</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s4">var</span><span class="s1"> coordKey </span><span class="s8">=</span><span class="s1"> </span><span class="s6">`</span><span class="s8">${</span><span class="s1">lat</span><span class="s8">.</span><span class="s1">toFixed</span><span class="s8">(</span><span class="s9">6</span><span class="s8">)}</span><span class="s6">,</span><span class="s8">${</span><span class="s1">lon</span><span class="s8">.</span><span class="s1">toFixed</span><span class="s8">(</span><span class="s9">6</span><span class="s8">)}</span><span class="s6">`</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s4">if</span><span class="s1"> </span><span class="s8">(!</span><span class="s1">markerCoords</span><span class="s8">[</span><span class="s1">coordKey</span><span class="s8">])</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s4">var</span><span class="s1"> marker </span><span class="s8">=</span><span class="s1"> </span><span class="s10">L</span><span class="s8">.</span><span class="s1">circleMarker</span><span class="s8">([</span><span class="s1">lat</span><span class="s8">,</span><span class="s1"> lon</span><span class="s8">],</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span>radius</span><span class="s8">:</span><span class="s1"> </span><span class="s9">5</span><span class="s8">,</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span>color</span><span class="s8">:</span><span class="s1"> </span><span class="s6">'red'</span><span class="s8">,</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span>fillColor</span><span class="s8">:</span><span class="s1"> </span><span class="s6">'red'</span><span class="s8">,</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span>fillOpacity</span><span class="s8">:</span><span class="s1"> </span><span class="s9">0.8</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s8">});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                  </span>markerCoords</span><span class="s8">[</span><span class="s1">coordKey</span><span class="s8">]</span><span class="s1"> </span><span class="s8">=</span><span class="s1"> marker</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                  </span>layers</span><span class="s8">[</span><span class="s1">currentFrequency</span><span class="s8">].</span><span class="s1">markers</span><span class="s8">.</span><span class="s1">addLayer</span><span class="s8">(</span><span class="s1">marker</span><span class="s8">);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">                </span></span><span class="s1">// Ajouter les secteurs uniquement si zoom &gt;= MIN_ZOOM_FOR_SECTORS et distance &lt;= MAX_DISTANCE_FOR_SECTORS</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s4">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">map</span><span class="s8">.</span><span class="s1">getZoom</span><span class="s8">()</span><span class="s1"> </span><span class="s8">&gt;=</span><span class="s1"> </span><span class="s10">MIN_ZOOM_FOR_SECTORS</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s4">var</span><span class="s1"> antennaPos </span><span class="s8">=</span><span class="s1"> </span><span class="s10">L</span><span class="s8">.</span><span class="s1">latLng</span><span class="s8">(</span><span class="s1">lat</span><span class="s8">,</span><span class="s1"> lon</span><span class="s8">);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s4">var</span><span class="s1"> distance </span><span class="s8">=</span><span class="s1"> mapCenter</span><span class="s8">.</span><span class="s1">distanceTo</span><span class="s8">(</span><span class="s1">antennaPos</span><span class="s8">);</span><span class="s1"> </span><span class="s11">// Distance en mètres</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s4">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">distance </span><span class="s8">&lt;=</span><span class="s1"> </span><span class="s10">MAX_DISTANCE_FOR_SECTORS</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s4">var</span><span class="s1"> sectorPoints </span><span class="s8">=</span><span class="s1"> createAzimuthSector</span><span class="s8">(</span><span class="s1">lat</span><span class="s8">,</span><span class="s1"> lon</span><span class="s8">,</span><span class="s1"> azimut</span><span class="s8">,</span><span class="s1"> </span><span class="s9">60</span><span class="s8">,</span><span class="s1"> sectorRadius</span><span class="s8">);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s4">var</span><span class="s1"> sector </span><span class="s8">=</span><span class="s1"> </span><span class="s10">L</span><span class="s8">.</span><span class="s1">polygon</span><span class="s8">(</span><span class="s1">sectorPoints</span><span class="s8">,</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                      </span>color</span><span class="s8">:</span><span class="s1"> </span><span class="s6">'blue'</span><span class="s8">,</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                      </span>fillColor</span><span class="s8">:</span><span class="s1"> </span><span class="s6">'blue'</span><span class="s8">,</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                      </span>fillOpacity</span><span class="s8">:</span><span class="s1"> </span><span class="s9">0.3</span><span class="s8">,</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                      </span>weight</span><span class="s8">:</span><span class="s1"> </span><span class="s9">1</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s8">});</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s4">var</span><span class="s1"> popupContent </span><span class="s8">=</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                      </span></span><span class="s6">`&lt;b&gt;Fréquence :&lt;/b&gt; </span><span class="s8">${</span><span class="s1">freqStr</span><span class="s8">}</span><span class="s6">&lt;br&gt;`</span><span class="s1"> </span><span class="s8">+</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                      </span></span><span class="s6">`&lt;b&gt;Puissance :&lt;/b&gt; </span><span class="s8">${</span><span class="s1">powerStr </span><span class="s8">!==</span><span class="s1"> </span><span class="s6">"N/A"</span><span class="s1"> </span><span class="s8">?</span><span class="s1"> powerStr </span><span class="s8">+</span><span class="s1"> </span><span class="s6">" W"</span><span class="s1"> </span><span class="s8">:</span><span class="s1"> powerStr</span><span class="s8">}</span><span class="s6">&lt;br&gt;`</span><span class="s1"> </span><span class="s8">+</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                      </span></span><span class="s6">`&lt;b&gt;Azimut :&lt;/b&gt; </span><span class="s8">${</span><span class="s1">azimut</span><span class="s8">}</span><span class="s6">°`</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span>sector</span><span class="s8">.</span><span class="s1">bindPopup</span><span class="s8">(</span><span class="s1">popupContent</span><span class="s8">);</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span>layers</span><span class="s8">[</span><span class="s1">currentFrequency</span><span class="s8">].</span><span class="s1">sectors</span><span class="s8">.</span><span class="s1">addLayer</span><span class="s8">(</span><span class="s1">sector</span><span class="s8">);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                  </span></span><span class="s8">}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s8">}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">              </span></span><span class="s8">}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s8">}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">          </span></span><span class="s8">});</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">          </span>map</span><span class="s8">.</span><span class="s1">addLayer</span><span class="s8">(</span><span class="s1">layers</span><span class="s8">[</span><span class="s1">currentFrequency</span><span class="s8">].</span><span class="s1">markers</span><span class="s8">);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">          </span>map</span><span class="s8">.</span><span class="s1">addLayer</span><span class="s8">(</span><span class="s1">layers</span><span class="s8">[</span><span class="s1">currentFrequency</span><span class="s8">].</span><span class="s1">sectors</span><span class="s8">);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">})</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">.</span><span class="s4">catch</span><span class="s8">(</span><span class="s1">err </span><span class="s8">=&gt;</span><span class="s1"> console</span><span class="s8">.</span><span class="s1">error</span><span class="s8">(</span><span class="s6">"Erreur chargement GeoJSON:"</span><span class="s8">,</span><span class="s1"> err</span><span class="s8">));</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s8">}</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span>document</span><span class="s8">.</span><span class="s1">querySelectorAll</span><span class="s8">(</span><span class="s6">'input[name="operatorFilter"]'</span><span class="s8">).</span><span class="s1">forEach</span><span class="s8">(</span><span class="s1">radio </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span>radio</span><span class="s8">.</span><span class="s1">addEventListener</span><span class="s8">(</span><span class="s6">'change'</span><span class="s8">,</span><span class="s1"> </span><span class="s4">function</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">if</span><span class="s1"> </span><span class="s8">(</span><span class="s4">this</span><span class="s8">.</span><span class="s1">checked</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">          </span>currentOperator </span><span class="s8">=</span><span class="s1"> </span><span class="s4">this</span><span class="s8">.</span><span class="s1">value</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">          </span>updateMap</span><span class="s8">();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s8">});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s8">});</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span>document</span><span class="s8">.</span><span class="s1">querySelectorAll</span><span class="s8">(</span><span class="s6">'input[name="freqFilter"]'</span><span class="s8">).</span><span class="s1">forEach</span><span class="s8">(</span><span class="s1">radio </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span>radio</span><span class="s8">.</span><span class="s1">addEventListener</span><span class="s8">(</span><span class="s6">'change'</span><span class="s8">,</span><span class="s1"> </span><span class="s4">function</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s4">if</span><span class="s1"> </span><span class="s8">(</span><span class="s4">this</span><span class="s8">.</span><span class="s1">checked</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">          </span>currentFrequency </span><span class="s8">=</span><span class="s1"> </span><span class="s4">this</span><span class="s8">.</span><span class="s1">value</span><span class="s8">;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">          </span>updateMap</span><span class="s8">();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s8">}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s8">});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s8">});</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">// Mettre à jour la carte lors d'un changement de zoom ou de déplacement</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">    </span>map</span><span class="s8">.</span><span class="s5">on</span><span class="s8">(</span><span class="s1">'zoomend moveend'</span><span class="s8">,</span><span class="s5"> </span><span class="s4">function</span><span class="s5"> </span><span class="s8">()</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">      </span>updateMap</span><span class="s8">();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s8">});</span></p>
<p class="p5"><span class="s7"></span><br></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span>updateMap</span><span class="s8">();</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
</body>
</html>
